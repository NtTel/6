[justify]Раздел «Блоки и баннеры» предоставляет возможность строить сайт из «кирпичиков», которые называются «блоки».<br>
Существуют следующие виды блоков:<br>
[li] [b][i]Стандартные[/i][/b] – размещаются в определенных местах сайта;<br>
[li] [b][i]Свободные (fly)[/i][/b] – данные блоки можно использовать в любых местах, шаблонах или модулях системы.<br>
Большинство потребностей по функциональности сайта покрываются при помощи стандартных блоков, но в некоторых случаях можно применять свободные блоки.<br>
<br>
[color=green][b]Стандартные блоки[/b][/color]<br>
Стандартные блоки можно разделить по следующим свойствам:<br>
[li] [b][i]По типу[/i][/b]:<br>
* Файловые – блоки, информация в которых выводится посредством html и php функций, заданных в соответствующем файле.<br>
* HTML – блоки, информация в которых выводится посредством html функций, заданных в содержании блока.<br>
* RSS – блоки, в которых выводится информация, взятая по RSS ссылке.<br>
* Системные – к системным блокам относятся: Admin, UserBox.<br>
[li] [b][i]По доступности (кто видит)[/i][/b]: все пользователи, только пользователи, только администраторы, только анонимы.<br>
[li] [b][i]По позиции[/i][/b]: слева, по центру внизу, по центру вверху, справа, верхний баннер, нижний баннер.<br>
<br>
[color=orangered][b][i]Оформление стандартных блоков[/i][/b][/color]<br>
За оформление стандартных блоков отвечают шаблоны тем: block-center.html, block-all.html, block-right.html и другие шаблоны, имеющие в названии префикс block. (См. раздел «Тема оформления»).<br>
Можно создать уникальное оформление для любого блока, находящегося в директории blocks/ (block-name.php; name - это имя блока). Для этого:<br>
1. В директории templates/тема_оформления/ необходимо создать файл шаблона с именем block-name.html.<br>
2. В созданном шаблоне необходимо сделать уникальное оформление для блока block-name.php.<br>
[b]Пример:[/b]<br>
необходимо сделать уникальное оформление для блока block-voting.php. В этом случае создается файл шаблона в директории templates/тема_оформления/ с названием block-voting.html. Система найдёт этот файл шаблона автоматически, а затем будет использовать его только для оформления блока block-voting.php.<br>
<br>
[b][i][color=orangered]Добавление файлового блока[/color][/i][/b]<br>
Для добавления файлового блока необходимо выполнить следующие действия:<br>
<br>
[b]1.[/b] Создать файл блока.<br>
Создать файл для файлового блока можно двумя способами: через интерфейс администраторского раздела и через файловую структуру сайта.<br>
<br>
[u]Создание файла через интерфейс администраторского раздела[/u]<br>
Перейдите во вкладку «Добавить файловый блок», которая отображает форму добавления нового файлового блока.<br>
Укажите имя создаваемого файла (например, mysite), учитывая, что SLAED CMS сама подставит к имени файла префикс «block-».<br>
Укажите тип создаваемого файла.<br>
Нажмите кнопку «Создать блок» после чего загрузится форма, в которую необходимо вставить код блока.<br>
[hr][color=red][b][i]Внимание![/b]<br>
В тексте программного кода блока, для вывода информации необходимо использовать переменную &#036;content вместо стандартных методов echo или print, это единственная отличительная особенность которую необходимоучитывать. Всё остальное реализуется при помощи стандартных методов и функций PHP и HTML. При реализации блоков учитывайте, любой PHP код должен начинаться c &lt;?php и заканчиваться ?&gt;.[/i][/color][hr] После вставки нажмите кнопку «Сохранить» и в файловой структуре сайта будет создан соответствующий файл (например, block-mysite.php, как в нашем примере).<br>
[hr][color=red][b][i]Внимание![/b]<br>
При создании файла файлового блока, необходимо установить права CHMOD 777 на папку blocks/, а в дальнейшем CHMOD 666 на созданный файл.[/i][/color][hr]<br>
[u]Создание файла через файловую структуру сайта[/u]<br>
Php файлы для файловых блоков хранятся в директории «blocks», которая находится в корневой директории сайта. В данной директории можно создать свой php файл, обязательно назвав его в формате «block-имя_блока.php» (в случае, если формат названия отличается, то при добавлении блока файл не будет виден в списке).<br>
<br>
[b]2.[/b] Установить связь между созданным файлом и блоком.<br>
Для того чтобы установить связь между файлом и файловым блоком, необходимо добавить новый блок, перейдя во вкладку «Добавить блок».<br>
Форма добавления имеет следующие поля:<br>
[li] [b][i]Заголовок[/i][/b] – вводится заголовок блока (какой заголовок введён - такой и отображается);<br>
[li] [b][i]Ссылка на канал RSS[/i][/b] – в случае, если необходимо, чтобы в блоке выводилась определенная RSS лента – укажите ссылку на неё или выберите из стандартного списка. В случае ввода ссылки на RSS не нужно выбирать файл в поле «Имя файла» и заполнять «Содержание». При создании файлового блока данное поле остается без изменений.<br>
[li] [b][i]Время обновления[/i][/b] – с какой частотой должна обновляться RSS лента. При создании файлового блока данное поле остается без изменений.<br>
[li] [b][i]Имя файла[/i][/b] – при создании файлового блока выбирается предварительно созданный файл.<br>
[li] [b][i]Содержание[/i][/b] – заполняется только в случае создания HTML блока (при заполнении содержания не нужно выбирать файл). При создании файлового блока данное поле остается без изменений.<br>
[li] [b][i]Позиция[/i][/b] – выбирается позиция, на которой должен выводиться блок.<br>
[li] [b][i]Отображать блок в модулях[/i][/b] – выбирается перечень модулей, в которых необходимо отображать блок.<br>
[li] [b][i]Язык[/i][/b] – выбор языковой версии, в которой необходимо отображать блок.<br>
[li] [b][i] Активировать[/i][/b] – «да» - блок будет показываться, «нет» - блок не будет показываться.<br>
[li] [b][i]Время работы в днях[/i][/b] – можно указать количество дней, в течение которых блок должен быть активен. 0 – блок активен без ограничений.<br>
[li] [b][i]После истечения[/i][/b] – можно выбрать, что система должна автоматически сделать с блоком после истечения времени работы.<br>
[li] [b][i]Кто это будет видеть?[/i][/b] – можно указать, для каких категорий пользователей доступен просмотр блока.<br>
<br>
[color=orangered][b][i]Добавление HTML блока[/i][/b][/color]<br>
Создавать HTML-блоки очень удобно в целях вывода баннеров, ссылок и других элементов, для вывода которых достаточно использования HTML кода.<br>
Добавить HTML-блок также просто, как и файловый, для этого необходимо перейти во вкладку «Добавить блок» и заполнить поля, что и при создании файлового блока, но вместо выбора файла заполнить поле «Содержание». Заполнять содержание необходимо html-кодом.<br>
<br>
[color=orangered][b][i]Добавление RSS-блока[/i][/b][/color]<br>
Перейдите во вкладку «Добавить блок» и заполнить поля, что и при создании файлового блока, но вместо выбора файла укажите ссылку на канал RSS и время обновления.<br>
<br>
[color=orangered][b][i]Использование блоков непосредственно в html файлах темы оформления[/i][/b][/color]<br>
1. Создайте блок в панели администратора системы, им может быть стандартный или свободный блок.<br>
2. Активируйте блок и в списке блоков определите его № - номер<br>
3. Для вставки блока, например в основной файл: index.html темы оформления, достаточно добавить участок кода: {%BLOCKS n,ХХХ%}<br>
<br>
ХХХ - номер вашего блока<br>
n - без оформления<br>
или<br>
ХХХ - полное название файла блока в директории: blocks/ например: block-forum.php<br>
s - стандартное оформление<br>
<br>
Возможны и другие варианты, на ваше усмотрение.<br>
<br>
[u]Описание переменных[/u]<br>
{%BLOCKS none,ХХХ%} или {%BLOCKS n,ХХХ%} - Произвольный блок системы или свободный блок без оформления, где ХХХ - это либо ID блока, либо название файла блока.<br>
<br>
{%BLOCKS standart,ХХХ%} или {%BLOCKS s,ХХХ%} - Произвольный блок системы или свободный блок с оформлением свободного блока, где ХХХ - это либо ID блока, либо название файла блока.<br>
<br>
[u]Создание персонального оформления для блока[/u]<br>
Для формирования эксклюзивного оформления для блока необходимо создать файл шаблона этого блока с именем.<br>
<br>
block-15.html<br>
15 - это номер блока в списке блоков. В базе данных (таблица префикс_blocks, поле bid).<br>
или<br>
block-name.html<br>
name - это имя блока, полное название файла блока в директории: blocks/<br>
<br>
Файл оформления блока следует размещать в основной директории темы оформления вместе с другими стандартными шаблонами системы.<br>
<br>
[color=green][b]Свободные (fly) блоки[/b][/color]<br>
Свободный блок (fly) можно разместить в любом месте страницы сайта, для чего требуется вставить код формирования этого свободного блока в соответствующий php-файл (в config/config_header.php, например). В шаблоны тем оформления (файлы *.html) нельзя вставлять код формирования свободного блока, так как в этом случае этот php-код не будет обрабатываться. Более полная информация о вставке блоков в шаблоны тем оформления приведена в разделе «Тема оформления».<br>
Свободный блок описывается в php-скрипте функцией: blocks(&quot;why&quot;, &quot;who&quot;), где blocks - функция создания свободного блока с параметрами: why и who.<br>
В зависимости от параметров why и who функция создания свободного блока может:<br>
[li] Печатать на стандартный вывод сформированный свободный блок (выводить блок на страничку).<br>
[li] Возвращать строку со сформированным свободным блоком (вывод блока в переменную для последующей вставки этого блока в html-шаблон). При этом этот свободный блок может быть с оформлением или без него – это зависит от параметров why.<br>
<br>
[u]Значение параметров why:[/u]<br>
[li] [b][i]none[/i][/b] (выводит тело блока на страничку без оформления)<br>
&#036;fly_block_1_1 = blocks(&quot;none&quot;, 15);<br>
&#036;fly_block_1_2 = blocks(&quot;none&quot;, &quot;block-menu2.php&quot;);<br>
[li] [b][i]standart[/i][/b] (выводит тело блока на страничку с оформлением)<br>
&#036;fly_block_2_1 = blocks(&quot;standart&quot;, 15);<br>
&#036;fly_block_2_2 = blocks(&quot;standart&quot;, &quot;block-menu2.php&quot;);<br>
[li] [b][i]plzreturn[/i][/b] (выводит тело блока в переменную без вывода на страничку и без оформления)<br>
&#036;fly_block_3_1 = blocks(&quot;plzreturn&quot;, 15);<br>
&#036;fly_block_3_2 = blocks(&quot;plzreturn&quot;, &quot;block-menu2.php&quot;);<br>
[li] [b][i]oreturnform[/i][/b] (тело блока в переменную без вывода на страничку, но с оформлением)<br>
&#036;fly_block_4_1 = blocks(&quot;oreturnform&quot;, 15);<br>
&#036;fly_block_4_1 = blocks(&quot;oreturnform&quot;, &quot;block-menu2.php&quot;);<br>
* 15 – это bid, номер блока в базе данных (Номер блока можно посмотреть в панели администратора в строке №).<br>
<br>
[u]Значение параметров who:[/u]<br>
[li] [b][i]bid[/i][/b] блока (номер блока в базе данных; таблица преф_blocks (преф – это префикс таблиц БД), поле bid)<br>
&#036;fly_block_5_1 = blocks(&quot;none&quot;, 15);<br>
&#036;fly_block_5_2 = blocks(&quot;standart&quot;, 15);<br>
&#036;fly_block_5_3 = blocks(&quot;plzreturn&quot;, 15);<br>
&#036;fly_block_5_4 = blocks(&quot;oreturnform&quot;, 15);<br>
[li] [b][i]block-name.php[/i][/b] (имя php-файла блока; name - это имя блока)<br>
&#036;fly_block_6_1 = blocks(&quot;none&quot;, &quot;block-menu2.php&quot;);<br>
&#036;fly_block_6_2 = blocks(&quot;standart&quot;, &quot;block-menu2.php&quot;);<br>
&#036;fly_block_6_3 = blocks(&quot;plzreturn&quot;, &quot;block-menu2.php&quot;);<br>
&#036;fly_block_6_4 = blocks(&quot;oreturnform&quot;, &quot;block-menu2.php&quot;);<br>
Чтобы пользоваться созданным свободным блоком необходимо, чтобы этот блок был активным. На этом блоке должна быть только одна отметка - «Свободный блок», в противном случае этот блок будет стандартным.<br>
<br>
Для формирования эксклюзивного оформления для свободного блока необходимо создать файл шаблона этого блока с именем:<br>
[li] [b][i]fly-block-15.html[/i][/b] (15 - это номер блока в базе данных (таблица преф_blocks, поле bid));<br>
[li] [b][i]fly-block-name.html[/i][/b] (name - это имя блока).[/justify]<br>
[b]Пример 1:[/b]<br>
Необходимо создать свободный блок с параметрами:<br>
[li] Вывод тела свободного блока на страничку.<br>
[li] Без оформления.<br>
[li] По номеру блока в базе данных.<br>
[php]blocks(&quot;none&quot;, 15);[/php]<br>
[li] C использованием имени блока.<br>
[php]blocks(&quot;none&quot;, &quot;block-menu2.php&quot;);[/php]<br>
[b]Пример 2:[/b]<br>
Необходимо создать свободный блок с параметрами:<br>
[li] Вывод тела свободного блока на страничку.<br>
[li] С оформлением.<br>
[li] По номеру блока в базе данных.<br>
[php]blocks(&quot;standart&quot;, 15);[/php]<br>
[li] С использованием имени блока:<br>
[php]blocks(&quot;standart&quot;, &quot;block-menu2.php&quot;);[/php]<br>
[b]Пример 3:[/b]<br>
Необходимо создать свободный блок с параметрами:<br>
[li] Вывод тела свободного блока в переменную.<br>
[li] Без оформления.<br>
[li] По номеру блока в базе данных<br>
[php]global &#036;blockg;<br>
ob_start();<br>
blocks(&quot;plzreturn&quot;, 15);<br>
&#036;blockg[&quot;15&quot;] = ob_get_clean();[/php]<br>
[li] С использованием имени блока:<br>
[php]global &#036;blockg;<br>
&#036;blockg[&quot;menu2&quot;] = blocks(&quot;plzreturn&quot;, &quot;block-menu2.php&quot;);[/php]<br>
[b]Пример 4:[/b]<br>
Необходимо создать свободный блок с параметрами:<br>
[li] Вывод тела свободного блока в переменную.<br>
[li] С оформлением.<br>
[li] По номеру блока в базе данных.<br>
[php]global &#036;blockg;<br>
ob_start();<br>
blocks(&quot;oreturnform&quot;, 15);<br>
&#036;blockg[&quot;15&quot;] = ob_get_clean();[/php]<br>
[li] С использованием имени блока.<br>
[php]global &#036;blockg;<br>
&#036;blockg[&quot;menu2&quot;] = blocks(&quot;oreturnform&quot;, &quot;block-menu2.php&quot;);[/php]<br>
[justify]Для вывода на страницу переменной, содержащей в себе тело свободного блока, необходимо сделать следующее:<br>
Открываем файл config/config_header.php и в него вставляем код:[/justify]<br>
[php]global &#036;blockg;<br>
&#036;blockg[&quot;menu2&quot;] = blocks(&quot;plzreturn&quot;, &quot;block-menu2.php&quot;);[/php]<br>
[justify]В любое место шаблона (в templates/ваша_тема/index.html, например) вставляем массив &#036;blockg[menu2] (обратите внимание на отсутствие кавычек внутри квадратных скобок!) На страницу вместо &#036;blockg[menu2] будет выведен блок menu2, код которого содержится в файле blocks/block-menu2.php.<br>
Для корректного вывода на страничку свободного блока, который из базы данных запрашивается по bid из таблицы преф_blocks, при включённом модуле rss_info (вывод новостей в формате RSS) необходимо в php-файл config/config_header.php записать:[/justify]<br>
[php]global &#036;blockg;<br>
&#036;blockg[&quot;menu2&quot;] = blocks(&quot;plzreturn&quot;, &quot;block-menu2.php&quot;);<br>
ob_start();<br>
blocks(&quot;none&quot;, 15);<br>
&#036;blockg[&quot;15&quot;] = ob_get_clean();[/php]<br>
[justify]Свободный блок может выводиться на страницы сайта на всём сайте, если его код встроен в тему оформления, или он может выводиться в каком-то определённом модуле, если его код встроен в код этого модуля.<br>
Свободный блок не может быть обработан системой как стандартный блок, но стандартный блок может быть обработан системой как свободный блок. Пример: блок modules, имеющий bid 1 (таблица slaed_blocks), можно вывести на страничку ещё раз как свободный блок, и тогда на этот блок накладываются все те ограничения, которые наложены на блок modules (показывать только на главной страничке сайта или только в одном модуле или в выбранных модулях или во всех модулях).<br>
<br>
[b][i][color=orangered]Изменение файла блока[/color][/i][/b]<br>
Для редактирования файла файлового блока перейдите во вкладку «Редактировать блок» и выберите нужный для редактирования файл.<br>
<br>
[b][i][color=orangered]Изменение блока[/color][/i][/b]<br>
Во вкладке «Главная» в столбце «Функции» перейдите по значению (Полное редактирование) – отобразится форма редактирования блока.<br>
<br>
[b][i][color=orangered]Изменение положения блока[/color][/i][/b]<br>
Во вкладке «Главная» в столбце «Положение» при помощи стрелок меняйте положение блока. Выбранная позиция блока выводится в столбце «Позиция».[/justify]